# @d2r/electron
Electron App for D2RMA. This is the primary interface for Users to customize D2RMA Settings.

### Architecture
Electron apps use a dual process architecture. 

The 'Main' process is responsible for bootstrapping the app and has access to the node ecosystem. This is where we run the GraphQL server and handle interop with the OS.

The 'Render' process is essentially the Chrome Browser which handles the UI. The React components that manage this interface are located in the [@d2r/ui](/packages/ui) package.

For more information on electron's process model see their [official documentation](https://www.electronjs.org/docs/latest/tutorial/process-model).


### Render -> Main Process Communication
In order for the Renderer to talk to the Main Process, we expose a GraphQL endpoint over [IPC](https://www.electronjs.org/docs/latest/api/ipc-main)

The Renderer will connect to this endpoint to request data/execute OS level functionality. This is essentially a proxy to access the Node.js backend through resolvers and mutations. 

GraphQL is used to avoid having to implicitly declare each IPC event on both the main and render processes aswell as supporting external port exposure. This is how you can connect multiple d2rma instances across a network. Aswell as prevents needing to set `nodeIntegration=true` on the renderer which is a bad [security practice](https://www.electronjs.org/docs/latest/tutorial/security).

For more information on the functionality available through the GraphQL Endpoint, see [@d2r/graphql](/packages/graphql).

### Supported OS/ Platforms
- Windows 7
- Windows 10
- Windows 11

Currently this Application is intended to only run on Windows. While you can build it for any platform, alot of the logic embeded in @d2r libraries assume the platform is windows.

### Code Isolation
Ideally, only electron specific code should be in this package. For Logic or OS related functions that could be used by other applications, use the relevant @d2r library.

Use `@d2r/utils` for smaller things that dont need their own package.

### UI Components
For Developing UI components, its recommended to use the `@d2r/ui` package for previewing in storybook. 

This is a better experience than developing inside electron. But either way will work since the UI library is sym linked in the development build. 

### Native Modules
Quite a few native modules are included in @d2r libraries. In order to include these in the electron app, you will need to make sure each package is build against the version of node Electron is expecting.

`electron-rebuild` 

### Boilerplate
Initial Boilerplate was generated by [Electron-React-Boilerplate](https://electron-react-boilerplate.js.org/). However some customization has been done to support a mono repository.



